###################################################################OPTIONS DE L'INDEX
Options -Indexes
DirectoryIndex index.php index.html

###################################################################We set error pages
#ERROR TARGETS
#ErrorDocument 404 /en/PageNotFound/

#php_flag display_errors on
#php_value error_reporting 1

###################################################################Enable directory like file structure
<IfModule mod_rewrite.c>


	########## Howto map /~user to /user ####################
	RewriteEngine On
	RewriteCond %{REQUEST_URI} ^/([^/]+)$
	RewriteCond %{DOCUMENT_ROOT}/%1 !-d
	RewriteCond /home/sites/%{SERVER_NAME}/users/%1 -d
	RewriteRule ^([^/]+)$ http://%{HTTP_HOST}/$1/ [R,L]
	RewriteCond %{REQUEST_URI} ^/([^/]+)/
	RewriteCond %{DOCUMENT_ROOT}/%1 !-d
	RewriteCond /home/sites/%{SERVER_NAME}/users/%1 -d
	RewriteRule ^([^/]+)(.+)$ /~$1/$2 [L]
	#########################################################


	#########################################################
	Options +FollowSymlinks
	RewriteEngine On
	#RewriteBase /
	#RewriteBase /
	#RewriteCond %{REQUEST_FILENAME} !-f
	#RewriteCond %{REQUEST_FILENAME} !-d
	RewriteRule ^User+Experience/$ projects.html
	RewriteRule ^Resume/$ http://www.red-agent.com/contact.html  [R=301,L]
	RewriteRule ^Contact/$ http://www.red-agent.com/contact.html  [R=301,L]
	RewriteRule ^User+Experience/$ http://www.red-agent.com/projects.html  [R=301,L]
	RewriteRule ^Games/$ http://www.red-agent.com/projects.html  [R=301,L]

	RewriteRule ^contact\.html$ index.php?page=contact [L]
	RewriteRule ^projects\.html$ index.php?page=projects [L]
	RewriteRule ^blog\.html$ index.php?page=blog [L]
	#########################################################
</IfModule>


###################################################################Set expiration with mod_expires
<IfModule mod_expires.c>
	ExpiresActive On
	ExpiresByType image/jpg  	"access plus 1 year"
	ExpiresByType image/jpeg 	"access plus 1 year"
	ExpiresByType image/gif  	"access plus 1 year"
	ExpiresByType image/png  	"access plus 1 year"
	ExpiresByType audio/mpeg	"access plus 1 year"
	ExpiresByType application/x-shockwave-flash "access plus 1 year"
	ExpiresByType image/x-icon 	"access plus 1 year"
	ExpiresByType text/plain	"access plus 1 year"
	ExpiresByType video/x-flv  	"access plus 1 year"
	ExpiresByType application/pdf 	"access plus 1 year"
	ExpiresByType application/x-javascript "access plus 1 year"
	ExpiresByType text/css   	"access plus 1 year"
</IfModule>

<IfModule mod_headers.c>
	###############################################################Enable Force download for some file types
	<FilesMatch "\.(pdf|sql)$">
		Header set Content-Disposition "attachment"
		# for older browsers
		Header set Content-Type "application/octet-stream"
	</FilesMatch>

	###############################################################Enable cache
	<FilesMatch "\.(gif|jpe?g|png|ico|css|js|swf)$">
		Header set Cache-Control "public, max-age=290304000"
		Header unset Vary
	</FilesMatch>
</IfModule>
###################################################################activate gzip if possible
<ifModule mod_gzip.c>
	mod_gzip_on Yes
	mod_gzip_dechunk Yes
	mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
	mod_gzip_item_include handler ^cgi-script$
	mod_gzip_item_include mime ^text/.*
	mod_gzip_item_include mime ^application/x-javascript.*
	mod_gzip_item_include mime ^image/.*
	mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
	mod_gzip_item_exclude         file       \.gz$
	mod_gzip_item_exclude         file       \.zip$
</ifModule>